---
layout: post
title:  "PythonåŠŸèƒ½ç‰¹æ€§"
description: "Python, æ˜¯ä¸€ä¸ªè®¾è®¡ä¼˜ç¾çš„è§£é‡Šå‹é«˜çº§è¯­è¨€, å®ƒæä¾›äº†å¾ˆå¤šèƒ½è®©ç¨‹åºå‘˜æ„Ÿåˆ°èˆ’é€‚çš„åŠŸèƒ½ç‰¹æ€§. ä½†æœ‰çš„æ—¶å€™, Python çš„ä¸€äº›è¾“å‡ºç»“æœå¯¹äºåˆå­¦è€…æ¥è¯´ä¼¼ä¹å¹¶ä¸æ˜¯é‚£ä¹ˆä¸€ç›®äº†ç„¶.

è¿™ä¸ªæœ‰è¶£çš„é¡¹ç›®æ„åœ¨æ”¶é›† Python ä¸­é‚£äº›éš¾ä»¥ç†è§£å’Œåäººç±»ç›´è§‰çš„ä¾‹å­ä»¥åŠé²œä¸ºäººçŸ¥çš„åŠŸèƒ½ç‰¹æ€§, å¹¶å°è¯•è®¨è®ºè¿™äº›ç°è±¡èƒŒåçœŸæ­£çš„åŸç†!

è™½ç„¶ä¸‹é¢çš„æœ‰äº›ä¾‹å­å¹¶ä¸ä¸€å®šä¼šè®©ä½ è§‰å¾— WTFs, ä½†å®ƒä»¬ä¾ç„¶æœ‰å¯èƒ½ä¼šå‘Šè¯‰ä½ ä¸€äº›ä½ æ‰€ä¸çŸ¥é“çš„ Python æœ‰è¶£ç‰¹æ€§. æˆ‘è§‰å¾—è¿™æ˜¯ä¸€ç§å­¦ä¹ ç¼–ç¨‹è¯­è¨€å†…éƒ¨åŸç†çš„å¥½åŠæ³•, è€Œä¸”æˆ‘ç›¸ä¿¡ä½ ä¹Ÿä¼šä»ä¸­è·å¾—ä¹è¶£!

å¦‚æœæ‚¨æ˜¯ä¸€ä½ç»éªŒæ¯”è¾ƒä¸°å¯Œçš„ Python ç¨‹åºå‘˜, ä½ å¯ä»¥å°è¯•æŒ‘æˆ˜çœ‹æ˜¯å¦èƒ½ä¸€æ¬¡å°±æ‰¾åˆ°ä¾‹å­çš„æ­£ç¡®ç­”æ¡ˆ. ä½ å¯èƒ½å¯¹å…¶ä¸­çš„ä¸€äº›ä¾‹å­å·²ç»æ¯”è¾ƒç†Ÿæ‚‰äº†, é‚£è¿™ä¹Ÿè®¸èƒ½å”¤èµ·ä½ å½“å¹´è¸©è¿™äº›å‘æ—¶çš„ç”œèœœå›å¿† ğŸ˜…"
categories: code
author: ç‹æ­¦
---

```python
# ä¹ä¹ä¹˜æ³•
for i in range(1, 10):
    for j in range(1, i+1):
        print("%2d *%2d = %2d "%(j, i, (i*j)), end='')
    print("")
```

     1 * 1 =  1 
     1 * 2 =  2  2 * 2 =  4 
     1 * 3 =  3  2 * 3 =  6  3 * 3 =  9 
     1 * 4 =  4  2 * 4 =  8  3 * 4 = 12  4 * 4 = 16 
     1 * 5 =  5  2 * 5 = 10  3 * 5 = 15  4 * 5 = 20  5 * 5 = 25 
     1 * 6 =  6  2 * 6 = 12  3 * 6 = 18  4 * 6 = 24  5 * 6 = 30  6 * 6 = 36 
     1 * 7 =  7  2 * 7 = 14  3 * 7 = 21  4 * 7 = 28  5 * 7 = 35  6 * 7 = 42  7 * 7 = 49 
     1 * 8 =  8  2 * 8 = 16  3 * 8 = 24  4 * 8 = 32  5 * 8 = 40  6 * 8 = 48  7 * 8 = 56  8 * 8 = 64 
     1 * 9 =  9  2 * 9 = 18  3 * 9 = 27  4 * 9 = 36  5 * 9 = 45  6 * 9 = 54  7 * 9 = 63  8 * 9 = 72  9 * 9 = 81 



```python
# 1. ç”±äº CPython åœ¨ç¼–è¯‘ä¼˜åŒ–æ—¶ï¼ŒæŸäº›æƒ…å†µä¸‹ä¼šå°è¯•ä½¿ç”¨å·²ç»å­˜åœ¨çš„ä¸å¯å˜å¯¹è±¡è€Œä¸æ˜¯æ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚(è¿™ç§è¡Œä¸ºè¢«ç§°ä½œå­—ç¬¦ä¸²çš„é©»ç•™)
a = "some_string"
print(id(a))
print(id("some" + "_" + "string")) # ä¸¤ä¸ªidå€¼æ˜¯ç›¸åŒ
```

    4501837360
    4501837360



```python
# 2. å­—ç¬¦ä¸²ä¸­åªåŒ…å«å­—æ¯ï¼Œæ•°å­—æˆ–ä¸‹åˆ’çº¿æ—¶å°†ä¼šé©»ç•™
a = "wtf"
b = "wtf"
print(a is b)
a = "wtf!"
b = "wtf!"
print(a is b)  
a, b = "wtf!", "wtf!"
print(a is b)   # 3.7ç‰ˆæœ¬è¿”å›ç»“æœä¸º Falseï¼Œ3.7ä»¥ä¸‹ç‰ˆæœ¬ä¸º True
```

    True
    False
    False



```python
# 3. å¸¸é‡æŠ˜å æ˜¯ Python ä¸­çš„ä¸€ç§ çª¥å­”ä¼˜åŒ–æŠ€æœ¯ã€‚è¿™æ„å‘³ç€åœ¨ç¼–è¯‘æ—¶è¡¨è¾¾å¼ 'a'*20 ä¼šè¢«æ›¿æ¢ä¸º 'aaaaaaaaaaaaaaaa' ä»¥å‡å°‘è¿è¡Œæ—¶çš„æ—¶é’Ÿå‘¨æœŸ
#  åªæœ‰é•¿åº¦å°äº 20 çš„å­—ç¬¦ä¸²æ‰ä¼šå‘ç”Ÿå¸¸é‡æŠ˜å  ï¼ˆæƒ³è±¡ä¸€ä¸‹ç”±äºè¡¨è¾¾å¼ 'a'*10**10 è€Œç”Ÿæˆçš„ .pyc æ–‡ä»¶çš„å¤§å°ï¼‰
print('a' * 20 is 'aaaaaaaaaaaaaaaaaaaa')
print('a' * 20 is 'aaaaaaaaaaaaaaaaaaaaa')
```

    True
    False



```python
# 4. 
some_dict = {}
some_dict[5.5] = "Ruby"
some_dict[5.0] = "JavaScript"
some_dict[5] = "Python"
print(some_dict)
```

    {5.5: 'Ruby', 5.0: 'Python'}



```python
# Python å­—å…¸é€šè¿‡æ£€æŸ¥é”®å€¼æ˜¯å¦ç›¸ç­‰å’Œæ¯”è¾ƒå“ˆå¸Œå€¼æ¥ç¡®å®šä¸¤ä¸ªæ˜¯å¦ç›¸åŒã€‚
# å…·æœ‰ç›¸åŒå€¼çš„ä¸å¯å˜å¯¹è±¡åœ¨Pythonä¸­å§‹ç»ˆå…·æœ‰ç›¸åŒçš„å“ˆå¸Œå€¼
```


```python
5 == 5.0
```




    True




```python
hash(5) == hash(5.0)
```




    True




```python
# æ³¨æ„ï¼šå…·æœ‰ä¸åŒå€¼çš„å¯¹è±¡ä¹Ÿå¯èƒ½å…·æœ‰ç›¸åŒçš„å“ˆå¸Œå€¼ï¼ˆå“ˆå¸Œå†²çªï¼‰
# 1. å½“æ‰§è¡Œ some_dict[5] = "Python" è¯­å¥æ—¶ï¼Œå› ä¸ºPythonå°† 5 å’Œ 5.0 è¯†åˆ«ä¸º some_dict çš„åŒä¸€ä¸ªé”®ï¼Œ
# æ‰€ä»¥å·²æœ‰å€¼ "JavaScript" å°±è¢« "Python" è¦†ç›–
```


```python
def some_func():
    try:
        return 'from_try'
    finally:
        return 'from_finally'
some_func()
```




    'from_finally'




```python
# å½“åœ¨ "try...finally" è¯­å¥çš„ try ä¸­æ‰§è¡Œ return, break æˆ– continue åï¼Œfinally å­å¥ä¾ç„¶ä¼šæ‰§è¡Œã€‚
# å‡½æ•°çš„è¿”å›å€¼ç”±æœ€åæ‰§è¡Œçš„ return è¯­å¥å†³å®šã€‚ç”±äº finally å­å¥ä¸€å®šä¼šæ‰§è¡Œï¼Œæ‰€ä»¥ finally å­å¥ä¸­çš„ return å°†å§‹ç»ˆæ˜¯æœ€åæ‰§è¡Œçš„è¯­å¥
```


```python
class WTF:
    pass
WTF() == WTF()  # ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡åº”è¯¥ä¸ç›¸ç­‰
```




    False




```python
WTF() is WTF()  # ä¹Ÿä¸ç›¸åŒ
```




    False




```python
hash(WTF()) == hash(WTF())  # å“ˆå¸Œå€¼ä¹Ÿåº”è¯¥ä¸åŒ
```




    True




```python
id(WTF()) == id(WTF())
```




    True




```python
# > å½“è°ƒç”¨ id å‡½æ•°æ—¶ï¼ŒPython åˆ›å»ºäº†ä¸€ä¸ª WTF ç±»çš„å¯¹è±¡å¹¶ä¼ ç»™ id å‡½æ•°ã€‚ç„¶å id å‡½æ•°è·å–å…¶idå€¼(ä¹Ÿå°±æ˜¯å†…å­˜åœ°å€)ï¼Œ
#   ç„¶åä¸¢å¼ƒå¯¹è±¡ã€‚è¯¥å¯¹è±¡å°±é”€æ¯äº†ã€‚
# > å½“æˆ‘ä»¬è¿ç»­ä¸¤æ¬¡è¿›è¡Œè¿™ä¸ªæ“ä½œæ—¶ï¼ŒPythonä¼šå°†ç›¸åŒçš„å†…å­˜åœ°å€åˆ†é…ç»™ç¬¬äºŒä¸ªå¯¹è±¡ã€‚å› ä¸ºï¼ˆåœ¨Cpythonä¸­ï¼‰id å‡½æ•°ä½¿ç”¨å¯¹è±¡
#   çš„å†…å­˜åœ°å€ä½œä¸ºå¯¹è±¡çš„idå€¼ï¼Œæ‰€ä»¥ä¸¤ä¸ªå¯¹è±¡çš„idå€¼æ˜¯ç›¸åŒçš„ã€‚
# > ç»¼ä¸Šï¼Œå¯¹è±¡çš„idå€¼ä»…ä»…åœ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå†…å”¯ä¸€ã€‚åœ¨å¯¹è±¡è¢«é”€æ¯ä¹‹åï¼Œæˆ–è¢«åˆ›å»ºä¹‹å‰ï¼Œå…¶ä»–å¯¹è±¡å¯ä»¥å…·æœ‰ç›¸åŒçš„idå€¼ã€‚
# > é‚£ä¸ºä»€ä¹ˆ is æ“ä½œçš„ç»“æœä¸º False å‘¢ ? è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ®µä»£ç 
```


```python
class WTF(object):
    def __init__(self): print("I")
    def __del__(self): print("D")
```


```python
WTF() is WTF()
```

    I
    I
    D
    D





    False




```python
id(WTF()) == id(WTF())
```

    I
    D
    I
    D





    True




```python
# å¯¹è±¡é”€æ¯çš„é¡ºåºæ˜¯é€ æˆæ‰€æœ‰ä¸åŒä¹‹å¤„çš„åŸå› 
```


```python
some_string = "wtf"
some_dict = {}
for i, some_dict[i] in enumerate(some_string):
    pass
```


```python
some_dict
```




    {0: 'w', 1: 't', 2: 'f'}




```python
# Python è¯­æ³• ä¸­é˜Ÿ for çš„å®šä¹‰æ˜¯ï¼š
#for_stmt: 'for' exprlist 'in' testlist ':' suite ['else' ':' suite]
# å…¶ä¸­ exprlist æŒ‡åˆ†é…ç›®æ ‡ã€‚è¿™æ„å‘³ç€å¯¹å¯è¿­ä»£å¯¹è±¡ä¸­çš„æ¯ä¸€é¡¹éƒ½ä¼šæ‰§è¡Œç±»ä¼¼ {exprlist} = {next_value} çš„æ“ä½œ   
```


```python
for i in range(4):
    print(i)
    i = 10
```

    0
    1
    2
    3



```python
# > åœ¨æ¯æ¬¡çš„è¿­ä»£ä¸­ï¼Œenumerate(some_string) å‡½æ•°å°±ç”Ÿæˆä¸€ä¸ªæ–°å€¼ i (è®¡æ•°å™¨å¢åŠ )å¹¶ä» some_string ä¸­è·å–ä¸€ä¸ªå­—ç¬¦ã€‚
# > ç„¶åå°†å­—å…¸ some_dict é”® i (åˆšåˆšåˆ†é…çš„)çš„å€¼è®¾ä¸ºè¯¥å­—ç¬¦ã€‚
```


```python
i, some_dict[i] = (0, 'w')
```


```python
i, some_dict[i] = (1, 't')
```


```python
i, some_dict[i] = (2, 'f')
```


```python
some_dict
```




    {0: 'w', 1: 't', 2: 'f'}




```python
# æ‰§è¡Œæ—¶æœºå·®å¼‚
```


```python
# 1.
array = [1, 8, 15]
g = (x for x in array if array.count(x) > 0)
array = [2, 8, 22]
print(list(g))
```

    [8]



```python
# 
array_1 = [1, 2, 3, 4]
g1 = (x for x in array_1)
array_1 = [1, 2, 3, 4, 5]

array_2 = [1, 2, 3, 4]
g2 = (x for x in array_2)
array_2[:] = [1, 2, 3, 4, 5]
```


```python
print(list(g1))
```

    [1, 2, 3, 4]



```python
print(list(g2))
```

    [1, 2, 3, 4, 5]



```python
# > åœ¨ç”Ÿæˆå™¨è¡¨è¾¾å¼ä¸­ï¼Œin å­å¥åœ¨å£°æ˜æ—¶æ‰§è¡Œï¼Œè€Œæ¡ä»¶å­å¥åˆ™æ˜¯åœ¨è¿è¡Œæ—¶æ‰§è¡Œ
# > æ‰€ä»¥åœ¨è¿è¡Œå‰ï¼Œarray å·²ç»è¢«é‡æ–°èµ‹å€¼ä¸º [2, 8, 22]ï¼Œå› æ­¤å¯¹äºä¹‹å‰çš„ 1, 8, 15 , åªæœ‰ count(8) çš„ç»“æœå¤§äº 0 çš„ï¼Œæ‰€ä»¥ç”Ÿæˆ 8
# > ç¬¬äºŒéƒ¨åˆ†ä¸­ g1 å’Œ g2 çš„è¾“å‡ºå·®å¼‚åˆ™æ˜¯ç”±äºå˜é‡ array_1 å’Œ array_2 è¢«é‡æ–°èµ‹å€¼çš„æ–¹å¼å¯¼è‡´çš„ã€‚
# > åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œ array_1 è¢«ç»‘å®šåˆ°æ–°å¯¹è±¡ [1, 2, 3, 4], å› ä¸º in å­å¥æ˜¯åœ¨å£°æ˜æ—¶è¢«æ‰§è¡Œçš„ï¼Œ
#    æ‰€ä»¥å®ƒä¹ƒç„¶å¼•ç”¨æ—§å¯¹è±¡ [1,2,3,4](å¹¶æ²¡æœ‰è¢«é”€æ¯)
```


```python
# is is not
```


```python
a = 256
```


```python
b = 256
```


```python
a is b
```




    True




```python
a = 257
```


```python
b = 257
```


```python
a is b
```




    False




```python
a = 257; b = 257
```


```python
a is b
```




    False




```python
# is å’Œ == çš„åŒºåˆ«
# > is è¿ç®—ç¬¦æ£€æŸ¥ä¸¤ä¸ªè¿ç®—å¯¹è±¡æ˜¯å¦å¼•ç”¨è‡ªåŒä¸€å¯¹è±¡ï¼ˆå³ï¼Œå®ƒæ£€æŸ¥ä¸¤ä¸ªè¿ç®—å¯¹è±¡æ˜¯å¦ç›¸åŒï¼‰
# > == è¿ç®—ç¬¦æ¯”è¾ƒä¸¤ä¸ªè¿ç®—å¯¹è±¡çš„å€¼æ˜¯å¦ç›¸ç­‰
# > å› æ­¤ is ä»£è¡¨å¼•ç”¨ç›¸åŒï¼Œ== ä»£è¡¨å€¼ç›¸ç­‰
```


```python
[] == []
```




    True




```python
[] is []
```




    False




```python
# 256 æ˜¯ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡ï¼Œè€Œ 257 ä¸æ˜¯
# å½“ä½ å¯åŠ¨Pythonçš„æ—¶å€™ï¼Œ-5 åˆ° 256 çš„æ•°å€¼å°±å·²ç»è¢«åˆ†é…å¥½äº†ã€‚è¿™äº›æ•°å­—å› ä¸ºç»å¸¸ä½¿ç”¨æ‰€ä»¥é€‚åˆè¢«æå‰å‡†å¤‡å¥½
```


```python
id(256)
```




    4461786224




```python
a = 256
```


```python
b = 256
```


```python
id(a)
```




    4461786224




```python
id(b)
```




    4461786224




```python
id(257)
```




    4532059760




```python
x = 257
```


```python
y = 257
```


```python
id(x)
```




    4532059440




```python
id(y)
```




    4532058992




```python
a, b = 257, 257
```


```python
id(a)
```




    4532058512




```python
id(b)
```




    4532058160




```python
row = [""]*3
```


```python
board = [row]*3
```


```python
board
```




    [['', '', ''], ['', '', ''], ['', '', '']]




```python
board[0][0] = "X"
```


```python
board
```




    [['X', '', ''], ['X', '', ''], ['X', '', '']]




```python
board = [['']*3 for _ in range(3)]
```


```python
board[0][0] = "X"
```


```python
board
```




    [['X', '', ''], ['', '', ''], ['', '', '']]




```python
funcs = []
results = []
for x in range(7):
    def some_func():
        return x
    funcs.append(some_func)
    results.append(some_func())
    
funcs_results = [func() for func in funcs]
```


```python
results
```




    [0, 1, 2, 3, 4, 5, 6]




```python
funcs_results
```




    [6, 6, 6, 6, 6, 6, 6]




```python
# å³ä½¿æ¯æ¬¡åœ¨è¿­ä»£ä¸­å°† some_func åŠ å…¥ funcs å‰çš„ x å€¼éƒ½ä¸ç›¸åŒï¼Œæ‰€æœ‰çš„å‡½æ•°è¿˜æ˜¯éƒ½è¿”å›6.
```


```python
funcs = []
for x in range(7):
    def some_func(x=x):
        return x
    funcs.append(some_func)
```


```python
funcs_results = [func() for func in funcs]
```


```python
funcs_results
```




    [0, 1, 2, 3, 4, 5, 6]




```python
'something' is not None
```




    True




```python
'something' is (not None)
```




    False




```python

```
